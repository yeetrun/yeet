[tools]
go = "1.25.5"
pre-commit = "latest"
staticcheck = "latest"

[tasks.init-host]
description = "Install yeet/catch on a host via yeet init"
usage = '''
arg "host" help="user@host for the catch install (e.g. root@box)"
'''
run = '''
#!/usr/bin/env bash
set -euo pipefail

go run ./cmd/yeet init "${usage_host?}"
'''

[tasks.install-githooks]
description = "Install git hooks via pre-commit"
run = '''
#!/usr/bin/env bash
set -euo pipefail

git config --local --unset-all core.hooksPath || true

pre-commit install --install-hooks \
  --hook-type pre-commit \
  --hook-type prepare-commit-msg
'''
